<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>phpcmsV9栏目列表页调用文章内容</title>
        <link media="all" rel="stylesheet" href="../css/reset.css" type="text/css" />
        <link type="text/css" rel="stylesheet" href="../css/text.css" />
        <link rel="stylesheet" href="../css/viki.css">
        
    </head>
    <body>
    <!-- 固定头部 -->
        <iframe src="../header.html" frameborder="0" width="100%" height="55px"></iframe>
    <!-- 内容开始 -->
        <div class="main w1220">
            <br>
            <center style="font-family: 'Microsoft Yahei', sans-serif; font-size: 1.80em; 
                font-weight: normal; color: #FF6600">phpcmsV9栏目列表页调用文章内容</center>
            <!-- 知识点 -->
            <h3>1、修改phpcms后台配置</h3>
            <p>怎么样在Phpcms V9栏目列表调用每一篇文章内容？</p>
            <p>我们先来看下<code>默认栏目调用的代码</code>：</p>
<xmp>{pc:content action="lists" catid="$catid" num="25" order="id DESC" page="$page"}
<ul class="list lh24 f14">
    {loop $data $r}
    <li><span class="rt">{date('Y-m-d H:i:s',$r[inputtime])}</span>·<a href="{$r[url]}" target="_blank"{title_style($r[style])}>{$r[title]}</a></li>
    {if $n%5==0}<li class="bk20 hr"></li>{/if}
    {/loop}
</ul>
<div id="pages" class="text-c">{$pages}</div>
{/pc}</xmp>
<p>可以看出，这里调用了文章标题、网址、发布时间、列表分页，那么文章内容怎么调用？</p>

<p>这样想，是否可以用moreinfo="1"，然后在loop里边调用{$r[content]}实现？答案是否定的，因为看数据库结构就知道：<code>content和title都不在一个表里边</code>，于是调不出来。
看下面的调用代码方式：</p>
<xmp>{pc:content action="lists" catid="$catid" num="25" order="id DESC" page="$page" moreinfo="1"}
<ul class="list lh24 f14">
    {loop $data $r}
    <li><span class="rt">{date('Y-m-d H:i:s',$r[inputtime])}</span>·<a href="{$r[url]}" target="_blank"{title_style($r[style])}>{$r[title]}</a>
    <?php $id = $r['id'];
        $sql = "SELECT 'content' FROM 'cmsyou_news_data' WHERE 'id'='$id' LIMIT 0 , 1";
        $query = mysql_query($sql);
        while($row=mysql_fetch_array($query)){
        echo $row[content];
        }
    ?>
    </li>
    {if $n%5==0}<li class="bk20 hr"></li>{/if}
{/loop}
</ul>
<div id="pages" class="text-c">{$pages}</div>
{/pc}</xmp>
<p>其中，下面这段代码调用了对应的Content：</p>
<xmp><?php $id = $r['id'];
    $sql = "SELECT 'content' FROM 'cmsyou_news_data' WHERE 'id'='$id' LIMIT 0 , 1";
    $query = mysql_query($sql);
    while($row=mysql_fetch_array($query)){
    echo $row[content];
    }
?></xmp>
<p>是<code>直接用SELECT调用指定数据表的对应id内容</code>。大家不放举一反三，多做尝试！有不同的方法欢迎留言探讨！</p>


            
        </div>
        <div id="ft">
            <div id="footer" class="w1220 cl">
                <hr>
                <center style="font-family: 微软雅黑; font-size: small; font-weight: normal; color: #009933">
                        edited by cq&nbsp;©&nbsp;2011-2015&nbsp;1457063@qq.com
                        <br>
                        Generated by <a href="#" target="_blank">sublime</a> 
            </div>
        </div>
    </body>
</html>
